---
title: 'DH Quarterly Reporting - Completed Notifications'
author_details: "Alana Little, NEPHU (alana.little@austin.org.au)"
version_details: "v2.1, 12/01/2026"
output: 
  html_document: 
    code_folding: none
    toc: true
    toc_depth: 3
    toc_float: true
knit: (function(input, ...) {
  rmarkdown::render(input, output_file = paste0("2026 Q2", " DH Quarterly Reporting", " Completed Notifications"), output_dir = "../Reports") })
---

```{css, echo = FALSE}
/* */ 
.main-container {
    max-width: 1000px;
}

h1.title {
  font-weight: bold;
  font-size: 20px;
  color: #191d43;
}

h1 {
  font-weight: bold;
  font-size: 20px;
  color: #5bc788;
}

h2 {
  font-weight: bold;
  font-size: 18px;
  color: #5bc788;
}

h3 {
  font-weight: bold;
  font-size: 16px;
  color: #5bc788;
}

body {
  font-size: 14px;
}

.infobox {
  padding: 10px;
  background: white;
  color: black;
  border: 2px solid #5BC788;
  border-radius: 10px;
}
```


```{r, echo = FALSE, message = FALSE}
#
knitr::opts_chunk$set(echo    = FALSE, 
                      warning = FALSE, 
                      message = FALSE)

options(knitr.kable.NA = '--')

source(paste0(here::here(), "/Code", "/00_setup.R"))
```


```{r}
#
source(paste0(here::here(), "/Code", "/00_data_extract.R"))
```

:::{.infobox}
**SQ1.5** Percentage of case follow-up marked as completed for allocated cases and their contacts on statewide databases in accordance with quick entry guides and statewide protocols

Numerator: Number of signed out case and contact events marked as completed by NEPHU during the reporting period

Denominator: Number of case and contact events signed out to NEPHU during the reporting period
:::

## Total number of notifications signed out during the reporting period

### All notifications

Data were extracted from PHESS via PHAR for all notifiable conditions signed out from the Department of Health to NEPHU between `r format(quarter_start, format = "%d/%m/%Y")` and `r format(quarter_end, format = "%d/%m/%Y")`. 

* Both initial notifications and reinvestigations signed out for follow-up were included.

* Cases and contact/exposed persons were included.

* Confirmed, Probable, Suspected, and At Risk notifications were included.

* Rejected and Not Notifiable notifications were excluded.

* Conditions not managed by LPHUs (anaphylaxis, elevated blood lead, human biosecurity reports, and tuberculosis) were excluded.

```{r}
#
signed_nephu <- cases_nephu %>%
  dplyr::filter(date_signed_dh >= quarter_start & date_signed_dh <= quarter_end) %>% 
  dplyr::filter(!event_classification %in% c("Not notifiable", "Rejected")) %>%
  #
  dplyr::arrange(phess_id, date_signed_dh) %>%
  #
  dplyr::distinct(phess_id, .keep_all = TRUE)
```

:::{.infobox}
`r format(nrow(signed_nephu), big.mark = ",")` notifications were signed out to NEPHU between `r format(quarter_start, format = "%d/%m/%Y")` and `r format(quarter_end, format = "%d/%m/%Y")`.
:::

:::{style="height: 1em;"}
:::

**Total number of notifications signed out for follow-up, NEPHU, notifications signed out between `r format(quarter_start, format = "%d/%m/%Y")` and `r format(quarter_end, format = "%d/%m/%Y")`**

```{r}
#
table_signed_nephu <- signed_nephu %>%
  dplyr::group_by(reporting_group, short_name) %>% 
  dplyr::summarise(signedout_n = n()) %>% 
  dplyr::ungroup() %>% 
  #
  dplyr::arrange(reporting_group, short_name) %>% 
  #
  janitor::adorn_totals()

table_signed_nephu %>% 
  knitr::kable(table.attr  = "style = \"color: black;\"",
               format.args = list(big.mark = ","),
               align       = "llr",
               col.names   = c("Reporting group",
                               "Condition",
                               "Signed out (n)")) %>% 
  #
  kableExtra::kable_styling(full_width = FALSE,
                            position   = "center",
                            html_font  = "Arial",
                            font_size  = 12) %>%
  #
  kableExtra::column_spec(3,
                          width = "1.25in") %>% 
  #
  kableExtra::row_spec(row  = 0,
                       bold = TRUE) %>% 
  #
  kableExtra::row_spec(nrow(table_signed_nephu),
                       bold      = TRUE,
                       extra_css = "border-top: 2px solid lightgray; border-bottom: 2px solid lightgray;") %>% 
  #
  kableExtra::scroll_box(height = "400px")
```

### Urgent notifications

Data were extracted from PHESS via PHAR for all notifiable conditions signed out from the Department of Health to NEPHU between `r format(quarter_start, format = "%d/%m/%Y")` and `r format(quarter_end, format = "%d/%m/%Y")`. 

* Both initial notifications and reinvestigations signed out for follow-up were included.

* Cases and contact/exposed persons were included.

* Confirmed, Probable, Suspected, and At Risk notifications were included.

* Rejected and Not Notifiable notifications were excluded.

* Conditions not managed by LPHUs (anaphylaxis, elevated blood lead, human biosecurity reports, and tuberculosis) were excluded.

Urgent notifiable conditions include the following: anthrax, botulism, *Candida auris*, cholera, diphtheria, haemolytic uraemic syndrome, *Haemophilus influenzae* type B, Hepatitis A, invasive Group A *Streptococcus*, invasive meningococcal disease, Japanese encephalitis, legionellosis, listeriosis, lyssavirus (Australian Bat Lyssavirus, rabies, and others), measles, Middle East Respiratory Syndrome, mpox, Murray Valley encephalitis, paratyphoid, plague, poliomyelitis, Severe Acute Respiratory Syndrome, smallpox, tularaemia, typhoid, viral haemorrhagic fevers, and yellow fever.

```{r}
#
signed_nephu <- cases_nephu %>%
  dplyr::filter(condition %in% conditions_urgent) %>% 
  #
  dplyr::filter(date_signed_dh >= quarter_start & date_signed_dh <= quarter_end) %>% 
  dplyr::filter(!event_classification %in% c("Not notifiable", "Rejected")) %>%
  #
  dplyr::arrange(phess_id, date_signed_dh) %>%
  #
  dplyr::distinct(phess_id, .keep_all = TRUE)
```

:::{.infobox}
`r format(nrow(signed_nephu), big.mark = ",")` urgent notifications were signed out to NEPHU between `r format(quarter_start, format = "%d/%m/%Y")` and `r format(quarter_end, format = "%d/%m/%Y")`.
:::

:::{style="height: 1em;"}
:::

**Total number of urgent notifications signed out for follow-up, NEPHU, notifications signed out between `r format(quarter_start, format = "%d/%m/%Y")` and `r format(quarter_end, format = "%d/%m/%Y")`**

```{r}
#
table_signed_nephu <- signed_nephu %>%
  dplyr::group_by(reporting_group, short_name) %>% 
  dplyr::summarise(signedout_n = n()) %>% 
  dplyr::ungroup() %>% 
  #
  dplyr::arrange(reporting_group, short_name) %>% 
  #
  janitor::adorn_totals()

table_signed_nephu %>% 
  knitr::kable(table.attr  = "style = \"color: black;\"",
               format.args = list(big.mark = ","),
               align       = "llr",
               col.names   = c("Reporting group",
                               "Condition",
                               "Signed out (n)")) %>% 
  #
  kableExtra::kable_styling(full_width = FALSE,
                            position   = "center",
                            html_font  = "Arial",
                            font_size  = 12) %>%
  #
  kableExtra::column_spec(3,
                          width = "1.25in") %>% 
  #
  kableExtra::row_spec(row  = 0,
                       bold = TRUE) %>% 
  #
  kableExtra::row_spec(nrow(table_signed_nephu),
                       bold      = TRUE,
                       extra_css = "border-top: 2px solid lightgray; border-bottom: 2px solid lightgray;")
```

***

## Total number of notifications completed during the reporting period

### All notifications

Data were extracted from PHESS via PHAR for all notifiable conditions completed by NEPHU between `r format(quarter_start, format = "%d/%m/%Y")` and `r format(quarter_end, format = "%d/%m/%Y")`. 

* Both initial notifications and reinvestigations signed out for follow-up were included.

* Cases and contact/exposed persons were included.

* Confirmed, Probable, Suspected, and At Risk notifications were included.

* Rejected and Not Notifiable notifications were excluded.

* Conditions not managed by LPHUs (anaphylaxis, elevated blood lead, human biosecurity reports, and tuberculosis) were excluded.

```{r}
#
completed_nephu <- cases_nephu %>%
  dplyr::filter(investigation_status %in% c("Completed", "Reviewed") | reinvestigation_status %in% c("Completed", "Reviewed")) %>% 
  #
  dplyr::mutate(completed_quarter = dplyr::case_when(
    investigation_completed_date >= quarter_start & investigation_completed_date <= quarter_end ~ "Yes",
    reinvestigation_status_date >= quarter_start & reinvestigation_status_date <= quarter_end   ~ "Yes",
    TRUE ~ "No")) %>% 
  #
  dplyr::filter(completed_quarter == "Yes") %>% 
  #
  # Q2 2026 only - exclude bulk closure of historical gono cases
  dplyr::filter(!c(condition == "Gonococcal infection" & event_date < lubridate::ymd("2025-10-24") & investigation_completed_date == lubridate::ymd("2025-10-24"))) %>% 
  #
  dplyr::filter(!event_classification %in% c("Not notifiable", "Rejected")) %>%
  #
  dplyr::arrange(phess_id, date_signed_dh) %>%
  #
  dplyr::distinct(phess_id, .keep_all = TRUE)
```

:::{.infobox}
`r format(nrow(completed_nephu), big.mark = ",")` notifications had follow-up completed by NEPHU between `r format(quarter_start, format = "%d/%m/%Y")` and `r format(quarter_end, format = "%d/%m/%Y")`.

Additionally, NEPHU bulk closed 2,039 historical gonorrhoea notifications during this reporting period.
:::

:::{style="height: 1em;"}
:::

**Total number of notifications with follow-up completed between `r format(quarter_start, format = "%d/%m/%Y")` and `r format(quarter_end, format = "%d/%m/%Y")`, NEPHU**

```{r}
#
table_completed_nephu <- completed_nephu %>%
  dplyr::group_by(reporting_group, short_name) %>% 
  dplyr::summarise(completed_n = n()) %>% 
  dplyr::ungroup() %>% 
  #
  dplyr::arrange(reporting_group, short_name) %>% 
  #
  janitor::adorn_totals()

table_completed_nephu %>% 
  knitr::kable(table.attr  = "style = \"color: black;\"",
               format.args = list(big.mark = ","),
               align       = "llr",
               col.names   = c("Reporting group",
                               "Condition",
                               "Completed (n)")) %>% 
  #
  kableExtra::kable_styling(full_width = FALSE,
                            position   = "center",
                            html_font  = "Arial",
                            font_size  = 12) %>%
  #
  kableExtra::column_spec(3,
                          width = "1.25in") %>% 
  #
  kableExtra::row_spec(row  = 0,
                       bold = TRUE) %>% 
  #
  kableExtra::row_spec(nrow(table_completed_nephu),
                       bold      = TRUE,
                       extra_css = "border-top: 2px solid lightgray; border-bottom: 2px solid lightgray;") %>% 
  #
  kableExtra::scroll_box(height = "400px")
```

### Urgent notifications

Data were extracted from PHESS via PHAR for all notifiable conditions completed by NEPHU between `r format(quarter_start, format = "%d/%m/%Y")` and `r format(quarter_end, format = "%d/%m/%Y")`.

* Both initial notifications and reinvestigations signed out for follow-up were included.

* Cases and contact/exposed persons were included.

* Confirmed, Probable, Suspected, and At Risk notifications were included.

* Rejected and Not Notifiable notifications were excluded.

* Conditions not managed by LPHUs (anaphylaxis, elevated blood lead, human biosecurity reports, and tuberculosis) were excluded.

Urgent notifiable conditions include the following: anthrax, botulism, *Candida auris*, cholera, diphtheria, haemolytic uraemic syndrome, *Haemophilus influenzae* type B, Hepatitis A, invasive Group A *Streptococcus*, invasive meningococcal disease, Japanese encephalitis, legionellosis, listeriosis, lyssavirus (Australian Bat Lyssavirus, rabies, and others), measles, Middle East Respiratory Syndrome, mpox, Murray Valley encephalitis, paratyphoid, plague, poliomyelitis, Severe Acute Respiratory Syndrome, smallpox, tularaemia, typhoid, viral haemorrhagic fevers, and yellow fever.

```{r}
#
completed_nephu <- cases_nephu %>%
  dplyr::filter(condition %in% conditions_urgent) %>% 
  #
  dplyr::filter(investigation_status %in% c("Completed", "Reviewed") | reinvestigation_status %in% c("Completed", "Reviewed")) %>% 
  #
  dplyr::mutate(completed_quarter = dplyr::case_when(
    investigation_completed_date >= quarter_start & investigation_completed_date <= quarter_end ~ "Yes",
    reinvestigation_status_date >= quarter_start & reinvestigation_status_date <= quarter_end   ~ "Yes",
    TRUE ~ "No")) %>% 
  #
  dplyr::filter(completed_quarter == "Yes") %>%
  #
  dplyr::filter(!event_classification %in% c("Not notifiable", "Rejected")) %>%
  #
  dplyr::arrange(phess_id, date_signed_dh) %>%
  #
  dplyr::distinct(phess_id, .keep_all = TRUE)
```

:::{.infobox}
`r format(nrow(completed_nephu), big.mark = ",")` urgent notifications had follow-up completed by NEPHU between `r format(quarter_start, format = "%d/%m/%Y")` and `r format(quarter_end, format = "%d/%m/%Y")`.
:::

:::{style="height: 1em;"}
:::

**Total number of urgent notifications with follow-up completed between `r format(quarter_start, format = "%d/%m/%Y")` and `r format(quarter_end, format = "%d/%m/%Y")`, NEPHU**

```{r}
#
table_completed_nephu <- completed_nephu %>%
  dplyr::group_by(reporting_group, short_name) %>% 
  dplyr::summarise(completed_n = n()) %>% 
  dplyr::ungroup() %>% 
  #
  dplyr::arrange(reporting_group, short_name) %>% 
  #
  janitor::adorn_totals()

table_completed_nephu %>% 
  knitr::kable(table.attr  = "style = \"color: black;\"",
               format.args = list(big.mark = ","),
               align       = "llr",
               col.names   = c("Reporting group",
                               "Condition",
                               "Completed (n)")) %>% 
  #
  kableExtra::kable_styling(full_width = FALSE,
                            position   = "center",
                            html_font  = "Arial",
                            font_size  = 12) %>%
  #
  kableExtra::column_spec(3,
                          width = "1.25in") %>% 
  #
  kableExtra::row_spec(row  = 0,
                       bold = TRUE) %>% 
  #
  kableExtra::row_spec(nrow(table_completed_nephu),
                       bold      = TRUE,
                       extra_css = "border-top: 2px solid lightgray; border-bottom: 2px solid lightgray;")
```

***

## Urgent notifications with follow-up pending

Data were extracted from PHESS via PHAR for all urgent notifiable conditions signed out from the Department of Health to NEPHU between `r format(quarter_start, format = "%d/%m/%Y")` and `r format(quarter_end, format = "%d/%m/%Y")`. 

* Both initial notifications and reinvestigations signed out for follow-up were included.

* Cases and contact/exposed persons were included.

* Confirmed, Probable, and Suspected notifications were included.

* Rejected, Not Notifiable, and At Risk notifications were excluded.

Urgent notifiable conditions include the following: anthrax, botulism, *Candida auris*, cholera, diphtheria, haemolytic uraemic syndrome, *Haemophilus influenzae* type B, Hepatitis A, invasive Group A *Streptococcus*, invasive meningococcal disease, Japanese encephalitis, legionellosis, listeriosis, lyssavirus (Australian Bat Lyssavirus, rabies, and others), measles, Middle East Respiratory Syndrome, mpox, Murray Valley encephalitis, paratyphoid, plague, poliomyelitis, Severe Acute Respiratory Syndrome, smallpox, tularaemia, typhoid, viral haemorrhagic fevers, and yellow fever.

```{r}
#
urgent_pending <- cases_nephu %>%
  dplyr::filter(condition %in% conditions_urgent) %>% 
  #
  dplyr::filter(date_signed_dh >= quarter_start & date_signed_dh <= quarter_end) %>% 
  dplyr::filter(event_classification %in% c("Confirmed", "Probable", "Suspected")) %>%
  dplyr::filter(!investigation_status %in% c("Completed", "Reviewed")) %>% 
  #
  dplyr::distinct(phess_id, .keep_all = TRUE) %>% 
  #
  dplyr::arrange(short_name, event_date)
```


```{r}
################################################################################ 
# Uncomment this code chunk as required
################################################################################
# Create and export the linelist of urgent cases that need manual checking
# urgent_pending <- urgent_pending %>%
#   dplyr::mutate(event_date     = format(event_date, "%d/%m/%Y"),
#                 date_signed_dh = format(date_signed_dh, "%d/%m/%Y")) %>%
#   #
#   dplyr::select(`PHESS ID` = phess_id,
#                 `Event date` = event_date,
#                 `Condition` = short_name,
#                 `Final event classification` = event_classification,
#                 `Signed out by DH` = date_signed_dh) %>%
#   #
#   dplyr::mutate(`Notes` = "")
#  
# writexl::write_xlsx(urgent_pending,
#                     paste0(here::here(), "/Data", "/ManualReview_", "UrgentPending_", format(quarter_end, format = "%Y%m%d"), ".xlsx"))
```

**Confirmed, probable, and suspected urgent notifications signed out between `r format(quarter_start, format = "%d/%m/%Y")` and `r format(quarter_end, format = "%d/%m/%Y")` with follow-up in progress, NEPHU**

```{r}
# Read in results of manual review
urgent_pending <- readxl::read_xlsx(paste0(here::here(), "/Data", "/ManualReview_", "UrgentPending_", 
                                           format(quarter_end, format = "%Y%m%d"), ".xlsx"),

                                    sheet     = 1,
                                    guess_max = min(100000, Inf)) %>%
  #
  janitor::clean_names()

urgent_pending %>%
  knitr::kable(table.attr  = "style = \"color: black;\"",
               format.args = list(big.mark = ","),
               align       = "lcllcl",
               col.names   = c("PHESS ID",
                               "Notification date",
                               "Condition",
                               "Classification",
                               "Sign-out date",
                               "Notes")) %>%
  #
  kableExtra::kable_styling(full_width = FALSE,
                            position   = "center",
                            html_font  = "Arial",
                            font_size  = 12) %>%
  #
  kableExtra::column_spec(c(2, 5),
                          width = "1.5in") %>%
  #
  kableExtra::row_spec(row  = 0,
                       bold = TRUE) %>%
  #
  kableExtra::row_spec(nrow(urgent_pending),
                       extra_css = "border-bottom: 2px solid lightgray;")
```

<br/>

<div class="tocify-extend-page" data-unique="tocify-extend-page" style="height: 0;"></div>
